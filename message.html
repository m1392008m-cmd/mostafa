<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ÙØ§Ø¬Ø£ØªÙƒ ÙˆØµÙ„Øª ğŸ</title>
    <style>
        body {
            margin: 0; padding: 0; overflow-x: hidden;
            background: linear-gradient(-45deg, #0077b6, #ffffff, #ffb7c5, #ac7373);
            background-size: 400% 400%; animation: bg 15s infinite;
            font-family: 'Segoe UI', sans-serif; text-align: center;
        }
        @keyframes bg { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
        
        #startScreen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, #ffffff, #e0f2fe); z-index: 1000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        .big-heart { font-size: 120px; cursor: pointer; animation: pulse 1.5s infinite; filter: drop-shadow(0 0 20px #0077b6); }
        @keyframes pulse { 0% {transform: scale(1);} 50% {transform: scale(1.1);} 100% {transform: scale(1);} }
        .names-on-heart { position: absolute; font-size: 18px; font-weight: bold; color: #0077b6; }

        .content { display: none; padding: 20px; max-width: 500px; margin: auto; position: relative; z-index: 10; }
        #userImage { width: 100%; border-radius: 20px; display: none; margin: 15px 0; border: 5px solid white; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        #typewriter { font-size: 22px; font-weight: bold; color: #333; background: rgba(255,255,255,0.6); padding: 15px; border-radius: 15px; margin: 15px 0; }
        iframe, video { width: 100%; border-radius: 15px; margin-top: 10px; }
        .particle { position: fixed; bottom: -50px; animation: fly 6s linear infinite; pointer-events: none; }
        @keyframes fly { to { transform: translateY(-110vh) rotate(360deg); opacity: 0; } }
    </style>
</head>
<body>

    <div id="startScreen">
        <div class="big-heart" onclick="startShow()">ğŸ’™</div>
        <div class="names-on-heart" id="heartNames"></div>
        <p style="color:#0077b6; font-weight:bold;">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ù„Ø¨ Ù„ÙØªØ­ Ø§Ù„Ù…ÙØ§Ø¬Ø£Ø©</p>
    </div>

    <div class="content" id="mainContent">
        <h2 id="toHeader" style="color:#0077b6;"></h2>
        <img id="userImage" src="">
        <div id="videoContainer"></div>
        <div id="typewriter"></div>
        <div id="audioContainer"></div>
        <a href="index.html" style="color:#ac7373; font-weight:bold; text-decoration:none; display:block; margin-top:20px;">Ø±Ø¯ Ø§Ù„Ù…ÙØ§Ø¬Ø£Ø© Ø¨Ù…Ø«Ù„Ù‡Ø§ ğŸ’Œ</a>
    </div>

    <script>
        const params = new URLSearchParams(window.location.search);
        document.getElementById('heartNames').innerText = `${params.get('from') || 'Ù…Ø­Ø¨Ùƒ'} ğŸ’™ ${params.get('to') || 'Ø­Ø¨ÙŠØ¨ÙŠ'}`;
        document.getElementById('toHeader').innerText = `Ø¥Ù„Ù‰: ${params.get('to') || 'Ø­Ø¨ÙŠØ¨ÙŠ'} âœ¨`;

        function startShow() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';

            const img = params.get('i');
            if(img && img !== "undefined") {
                const imgTag = document.getElementById('userImage');
                imgTag.src = decodeURIComponent(img);
                imgTag.style.display = 'block';
            }

            const audio = params.get('a');
            if(audio) {
                document.getElementById('audioContainer').innerHTML = `<audio id="m" autoplay loop><source src="${decodeURIComponent(audio)}"></audio>`;
                document.getElementById('m').play().catch(() => {});
            }

            const video = params.get('v');
            if(video) {
                let vArea = document.getElementById('videoContainer');
                let url = decodeURIComponent(video);
                if(url.includes('youtube') || url.includes('youtu.be')) {
                    let id = url.split('v=')[1]?.split('&')[0] || url.split('/').pop();
                    vArea.innerHTML = `<iframe src="https://www.youtube.com/embed/${id}?autoplay=1" frameborder="0" allow="autoplay" style="height:250px;"></iframe>`;
                } else {
                    vArea.innerHTML = `<video controls autoplay style="max-height:250px;"><source src="${url}"></video>`;
                }
            }

            typeWriter(decodeURIComponent(params.get('m') || ""), 0);
            setInterval(createParticle, 300);
        }

        function typeWriter(text, i) {
            if (i < text.length) {
                document.getElementById("typewriter").innerHTML += text.charAt(i);
                setTimeout(() => typeWriter(text, i + 1), 60);
            }
        }

        function createParticle() {
            const p = document.createElement('div');
            p.className = 'particle';
            p.innerText = ['ğŸ’™', 'âœ¨', 'ğŸ’'][Math.floor(Math.random()*3)];
            p.style.left = Math.random() * 100 + 'vw';
            p.style.fontSize = '25px';
            document.body.appendChild(p);
            setTimeout(() => p.remove(), 6000);
        }
    </script>
</body>
</html>
