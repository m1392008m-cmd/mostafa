<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ù…ÙØ§Ø¬Ø£Ø© Ø§Ù„ÙƒØ¨Ø±Ù‰</title>
<style>
body{ margin:0; font-family:tahoma; text-align:center; color:white; background:radial-gradient(circle,#ff4fa3,#800040,#400020); overflow:hidden; height: 100vh; display: flex; align-items: center; justify-content: center; }
button{ padding:12px 20px; border:none; border-radius:25px; background:white; color:#800040; font-weight:bold; cursor:pointer; }
#main,#ready,#passBox{ padding:20px; z-index: 10; position: relative; }
#main { display:none; } #ready { display:none; }
#msg{ font-size:22px; margin:20px; min-height:70px; line-height: 1.6; }
.water{ position:fixed; bottom:10px; right:10px; opacity:.3; font-size:14px; }
.heart{ position:absolute; font-size:20px; animation:up 6s linear infinite; pointer-events: none; }
@keyframes up{ from{transform:translateY(100vh)} to{transform:translateY(-10vh)} }
.word{ position:fixed; font-size:18px; animation:fade 4s linear infinite; pointer-events: none; }
@keyframes fade{ 0%{opacity:0;transform:translateY(20px)} 50%{opacity:1} 100%{opacity:0;transform:translateY(-20px)} }
.star{ position:fixed; width:3px;height:3px; background:white; animation:blink 2s infinite alternate; }
@keyframes blink{ from{opacity:.2} to{opacity:1} }
img{ max-width:220px; border-radius:15px; box-shadow:0 0 20px white; animation:pop 1s ease; margin-top: 10px; }
@keyframes pop{ from{transform:scale(0)} to{transform:scale(1)} }

/* Ø´ÙƒÙ„ Ø§Ù„Ù‚Ù„Ø¨ Ø§Ù„ÙƒØ¨ÙŠØ± Ø­ÙˆÙ„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± */
.big-heart-container { font-size: 200px; color: #ff4d6d; position: relative; }
.inner-form { position: absolute; top: 55%; left: 50%; transform: translate(-50%, -50%); font-size: 16px; color: white; width: 100%; }
.inner-form input { padding: 8px; border-radius: 10px; border: none; width: 120px; text-align: center; }
</style>
</head>
<body>

<div id="passBox">
    <div class="big-heart-container">
        â¤ï¸
        <div class="inner-form">
            <p style="font-size: 18px; font-weight: bold; margin: 5px;">ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ÙŠØ§ Ø¬Ù…ÙŠÙ„</p>
            <input type="password" id="p"><br><br>
            <button onclick="check()">Ø¯Ø®ÙˆÙ„</button>
        </div>
    </div>
</div>

<div id="ready">
    <h2>Ø¬Ø§Ù‡Ø² Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ÙƒØ¨Ø±Ù‰ØŸ ğŸ˜</h2>
    <button onclick="openLove()">Ø§ÙØªØ­ Ø§Ù„Ø¢Ù† âœ¨</button>
</div>

<div id="main">
    <h2 id="title"></h2>
    <div id="days" style="font-size: 20px; color: #ffeb3b;"></div>
    <div id="msg"></div>
    <img id="photo" style="display:none;"><br><br>
    <audio id="audio" autoplay></audio>
</div>

<div class="water" id="water"></div>

<script>
// ÙÙƒ ØªØ´ÙÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø·
let q = new URLSearchParams(location.search);
let encodedData = q.get("data");
let data = {};

if (encodedData) {
    data = JSON.parse(decodeURIComponent(escape(atob(encodedData))));
}

function check() {
    let inputP = document.getElementById('p').value;
    // Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ø¢Ù† ØªØªÙ… Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙÙƒÙˆÙƒØ©
    if (inputP === data.pass) {
        document.getElementById('passBox').style.display = "none";
        document.getElementById('ready').style.display = "block";
    } else {
        alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ØºÙ„Ø· ÙŠØ§ Ø³ÙƒØ± ğŸ˜¢");
    }
}

function openLove() {
    document.getElementById('ready').style.display = "none";
    document.getElementById('main').style.display = "block";

    document.getElementById('water').innerText = "From " + (data.from || "Ù…Ø¬Ù‡ÙˆÙ„");

    if (data.date) {
        let d1 = new Date(data.date);
        let d2 = new Date();
        let diff = Math.floor((d2 - d1) / (1000 * 60 * 60 * 24));
        document.getElementById('days').innerHTML = "Ø¨Ù‚Ø§Ù„Ù†Ø§ Ù…Ø¹ Ø¨Ø¹Ø¶ " + diff + " ÙŠÙˆÙ… â¤ï¸";
    }

    let text = `Ø¥Ù„Ù‰ ${data.to || 'Ø­Ø¨ÙŠØ¨ÙŠ'}.. \n ${data.type || 'Ø±Ø³Ø§Ù„Ø© Ø­Ø¨'} \n Ù…Ù† ${data.from || 'Ø­Ø¨ÙŠØ¨Ùƒ'} â¤ï¸`;
    let i = 0;
    let target = document.getElementById('msg');
    let inter = setInterval(() => {
        target.innerHTML += text[i] === '\n' ? '<br>' : text[i];
        i++;
        if (i >= text.length) clearInterval(inter);
    }, 80);

    if (data.img) {
        let p = document.getElementById('photo');
        p.src = data.img;
        p.style.display = "inline-block";
    }
    if (data.music) {
        let a = document.getElementById('audio');
        a.src = data.music;
        a.play().catch(() => console.log("Auto-play blocked"));
    }
}

// (Ø£Ø¶Ù Ù‡Ù†Ø§ Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù‚Ù„ÙˆØ¨ ÙˆØ§Ù„Ù†Ø¬ÙˆÙ… Ø§Ù„ØªÙŠ ÙƒØ§Ù†Øª ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø³Ø§Ø¨Ù‚)
</script>

</body>
</html>
